import{f as E,e as u,r as v,j as s}from"./index-BXQqOrT8.js";const S=()=>{const{user:a,signOut:t}=E(),r=u(),[n,d]=v.useState(()=>JSON.parse(localStorage.getItem("historial_synapses")||"[]")),h=async()=>{await t(),r("/")},o=()=>{localStorage.removeItem("historial_synapses"),d([])};if(!a)return s.jsx("div",{className:"loading-screen",children:"ACCESO DENEGADO"});const m=new Date(a.last_sign_in_at).toLocaleString("es-ES",{timeZone:"UTC",hour12:!1}).toUpperCase(),x=new Date(a.created_at).toLocaleDateString("es-ES").toUpperCase();return s.jsxs("div",{className:"perfil-container",children:[s.jsxs("div",{className:"perfil-header",children:[s.jsxs("div",{className:"system-status",children:[s.jsx("span",{className:"dot-green blink"})," SYSTEM: ONLINE"]}),s.jsx("h1",{children:"EXPEDIENTE DE USUARIO"}),s.jsxs("p",{className:"uuid-code",children:["SUBJ_ID: ",a.id]})]}),s.jsxs("div",{className:"perfil-grid",children:[s.jsxs("div",{className:"card-tech",children:[s.jsx("h3",{children:"// CREDENCIALES"}),s.jsxs("div",{className:"data-row",children:[s.jsx("span",{className:"label",children:"EMAIL:"}),s.jsx("span",{className:"value",children:a.email})]}),s.jsxs("div",{className:"data-row",children:[s.jsx("span",{className:"label",children:"PROVEEDOR:"}),s.jsx("span",{className:"value",children:a.app_metadata.provider||"EMAIL"})]}),s.jsxs("div",{className:"data-row",children:[s.jsx("span",{className:"label",children:"ALTA:"}),s.jsx("span",{className:"value",children:x})]})]}),s.jsxs("div",{className:"card-tech",children:[s.jsx("h3",{children:"// TELEMETRÍA SESIÓN"}),s.jsxs("div",{className:"data-row",children:[s.jsx("span",{className:"label",children:"ÚLTIMO ACCESO:"}),s.jsx("span",{className:"value",children:m})]}),s.jsxs("div",{className:"data-row",children:[s.jsx("span",{className:"label",children:"ROL:"}),s.jsx("span",{className:"value",children:a.role||"USER"})]})]}),s.jsxs("div",{className:"card-tech full-width",children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[s.jsx("h3",{style:{margin:0},children:"// LOG DE OPERACIONES (PEDIDOS)"}),n.length>0&&s.jsx("button",{className:"btn-purge",onClick:o,children:"[PURGE_DATA]"})]}),n.length>0?s.jsx("div",{className:"history-list",children:n.map((e,N)=>s.jsxs("div",{className:"history-item",children:[s.jsxs("div",{className:"history-header",children:[s.jsxs("span",{className:"order-id",children:["REF: ",e.id]}),s.jsxs("span",{className:`order-status status-${e.estado==="COMPLETADO"?"green":"yellow"}`,children:["[",e.estado,"]"]})]}),s.jsxs("div",{className:"history-body",children:[s.jsxs("div",{className:"history-meta",children:[s.jsxs("span",{children:["TIMESTAMP: ",e.fecha]}),s.jsxs("span",{children:["VALUATION: ",e.total]})]}),s.jsxs("div",{className:"history-payload",children:[s.jsx("span",{className:"payload-label",children:"PAYLOAD:"}),e.items.map((l,i)=>{const j=typeof l=="string"?l:l.nombre,c=typeof l=="string"?1:l.cantidad,p=i===e.items.length-1;return s.jsxs("span",{children:[j," ",c>1&&s.jsxs("strong",{children:["(x",c,")"]}),!p&&", "]},i)})]})]})]},N))}):s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"NO SE HAN REGISTRADO OPERACIONES RECIENTES."})})]})]}),s.jsx("div",{className:"perfil-actions",children:s.jsx("button",{className:"btn-logout-tech",onClick:h,children:"CERRAR SESIÓN [TERMINATE]"})})]})};export{S as default};
